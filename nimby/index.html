<!DOCTYPE html><html lang="de"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>NIMBY - crichardt.com</title><meta name="description" content="So wohlklingend dieses Akronym auch ist, so verheerend sind doch seine Auswirkungen auf den Wechsel hin zu erneuerbaren Energien und auch anderen, meist damit zusammenhängenden Themenbereichen. Wofür steht also NIMBY? NOT IN MY BACKYARD Auf deutsch: Nicht in meinem Hinterhof. Somit steht das Akronym für eine Abwehrhaltung gegenüber einem Projekt&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://crichardt.com/nimby/"><meta property="og:title" content="NIMBY"><meta property="og:image" content="https://crichardt.com/media/posts/34/IMG_3231-crichardt.com.jpg"><meta property="og:image:width" content="3992"><meta property="og:image:height" content="2661"><meta property="og:site_name" content="crichardt.com"><meta property="og:description" content="So wohlklingend dieses Akronym auch ist, so verheerend sind doch seine Auswirkungen auf den Wechsel hin zu erneuerbaren Energien und auch anderen, meist damit zusammenhängenden Themenbereichen. Wofür steht also NIMBY? NOT IN MY BACKYARD Auf deutsch: Nicht in meinem Hinterhof. Somit steht das Akronym für eine Abwehrhaltung gegenüber einem Projekt&hellip;"><meta property="og:url" content="https://crichardt.com/nimby/"><meta property="og:type" content="article"><link rel="alternate" type="application/atom+xml" href="https://crichardt.com/feed.xml"><link rel="alternate" type="application/json" href="https://crichardt.com/feed.json"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700&amp;subset=latin-ext&amp;display=swap" rel="stylesheet"><style>h1,h2,h3,h4,h5,h6,blockquote,.logo,.footer__logo,.dropcap::first-letter ,.search__input{font-family:'Playfair Display',serif}body,.btn,[type=button],[type=submit],button,.navbar__menu,.footer{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://crichardt.com/assets/css/style.css?v=8133c9b37761d27d9362dea198324d49"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://crichardt.com/nimby/"},"headline":"NIMBY","datePublished":"2022-08-27T18:09","dateModified":"2024-01-30T00:44","image":{"@type":"ImageObject","url":"https://crichardt.com/media/posts/34/IMG_3231-crichardt.com.jpg","height":2661,"width":3992},"description":"So wohlklingend dieses Akronym auch ist, so verheerend sind doch seine Auswirkungen auf den Wechsel hin zu erneuerbaren Energien und auch anderen, meist damit zusammenhängenden Themenbereichen. Wofür steht also NIMBY? NOT IN MY BACKYARD Auf deutsch: Nicht in meinem Hinterhof. Somit steht das Akronym für eine Abwehrhaltung gegenüber einem Projekt&hellip;","author":{"@type":"Person","name":"Clemens Richardt","url":"https://crichardt.com/autor/clemens-richardt/"},"publisher":{"@type":"Organization","name":"Clemens Richardt","logo":{"@type":"ImageObject","url":"https://crichardt.com/media/website/CR_light-klein-no-border.png","height":200,"width":306}}}</script></head><body><header class="header" id="js-header"><div><a class="logo" href="https://crichardt.com/"><img src="https://crichardt.com/media/website/CR_light-klein-no-border.png" alt="crichardt.com"></a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul id="js-navbar-menu" class="navbar__menu"><li><a href="https://crichardt.com/tag/ethical_business/" target="_self">Ethical Business</a></li><li class="has-submenu"><a href="https://crichardt.com/tag/fotografie/" target="_self" aria-haspopup="true">Fotografie</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://crichardt.com/tag/dslr/" target="_self">DSLR Fotografie</a></li></ul></li><li><a href="https://travel.crichardt.com/" title="https://crichardt.com/travel/" target="_self">Travel</a></li><li><a href="https://crichardt.com/autor/clemens-richardt/" target="_self">Über mich</a></li><li><a href="https://crichardt.com/impressum/" title="Impressum" target="_self">Impressum</a></li><li><a href="https://crichardt.com/datenschutz/" target="_self">Datenschutz</a></li></ul></nav><div class="search"><div class="search__overlay" id="js-search-overlay"><div><form action="https://crichardt.com/search.html" class="search__form"><input class="search__input" id="js-search-input" type="search" name="q" placeholder="search..." aria-label="Search input" autofocus="autofocus"></form><button class="search__close" id="js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn" id="js-search-btn" aria-label="Search"><svg class="icon" role="presentation" focusable="false"><use xlink:href="https://crichardt.com/assets/svg/svg-map.svg#search"/></svg></button></div></div></header><article><div class="hero"><div class="hero__wrapper"><figure class="hero__image hero__image--overlay"><img src="https://crichardt.com/media/posts/34/IMG_3231-crichardt.com.jpg" srcset="https://crichardt.com/media/posts/34/responsive/IMG_3231-crichardt.com-xs.jpg 300w, https://crichardt.com/media/posts/34/responsive/IMG_3231-crichardt.com-sm.jpg 480w, https://crichardt.com/media/posts/34/responsive/IMG_3231-crichardt.com-md.jpg 749w, https://crichardt.com/media/posts/34/responsive/IMG_3231-crichardt.com-xl.jpg 1200w, https://crichardt.com/media/posts/34/responsive/IMG_3231-crichardt.com-xxl.jpg 1600w, https://crichardt.com/media/posts/34/responsive/IMG_3231-crichardt.com-xxxl.jpg 2560w" sizes="(max-width: 2560px) 100vw, 2560px" loading="eager" height="2661" width="3992" alt="Eine Stromtrasse, im Hintergrund Windräder"><figcaption>©2022 Clemens Richardt</figcaption></figure><div class="hero__inner"><h1 class="hero__title">NIMBY</h1><div class="post__meta"><a href="https://crichardt.com/autor/clemens-richardt/" class="post__meta-author" title="Clemens Richardt"><img src="https://crichardt.com/media/website/IMGP3829-crichardt.com-1.jpg" loading="eager" alt="Clemens Richardt"> By Clemens Richardt </a><time datetime="2022-08-27T18:09" class="page__item-date">27/08/2022 </time><a href="https://crichardt.com/tag/ethical_business/" class="post__meta-category">Ethical Business</a></div></div></div></div><div class="main"><div class="wrapper"><div class="page post"><div class="post__inner"><div class="post__entry"><p class="dropcap">So wohlklingend dieses Akronym auch ist, so verheerend sind doch seine Auswirkungen auf den Wechsel hin zu erneuerbaren Energien und auch anderen, meist damit zusammenhängenden Themenbereichen. Wofür steht also NIMBY?</p><blockquote><p>NOT IN MY BACKYARD</p></blockquote><p>Auf deutsch: Nicht in meinem Hinterhof. Somit steht das Akronym für eine Abwehrhaltung gegenüber einem Projekt im direkten Umfeld einer Person, die im krassen Gegensatz zur eigentlichen Überzeugung dieser Person steht. Das Akronym kann auch für eben diese Personen selbst genutzt werden.</p><p>Ein Beispiel: <em>"Die Bayern sind im Bereich der Windkraft absolute NIMBYs."</em> Diese Aussage basiert auf Statistiken zum Windkraftausbau in Deutschland und aktueller Gesetzgebung in Bayern. Während in der bayrischen Politik Pläne für 800 neue Windkraftanlagen bis 2030 existieren (<a href="https://www.augsburger-allgemeine.de/bayern/windraeder-anzahl-bayern-wie-viele-windraeder-gibt-es-in-bayern-id62987186.html" target="_blank" rel="noopener noreferrer">Augsburger Allgemeine</a>), sorgen Gesetze wie die 10H-Abstandsregel (10x Höhe des Windrads bis zum nächsten Wohnhaus) nahezu für Stillstand beim Bau von neuen Windrädern. So wurden in Bayern 2022 gerade mal 3 Windräder errichtet, während 1 demontiert wurde. (<a href="https://www.windbranche.de/windenergie-ausbau/bundeslaender/bayern" target="_blank" rel="noopener noreferrer">Windbranche.de</a>) Da braucht es keine große Rechnung um zu sehen, dass das Ziel bei diesem Tempo deutlich verfehlt wird.</p><p>Auch beim Bau von Infrastrukturprojekten wie neuen Stromleitungen, Bahnstrecken und Co. kommt es immer wieder zu NIMBYs, die eine Verzögerung der Projekte hervorrufen. Aber auch jeder, der schon mal Berührungspunkte mit kleineren, aber insbesondere auch größeren Projekten gehabt hat, wird eine ähnliche Problematik bereits beobachtet haben. Meistens sieht ein Großteil der Beteiligten die Umsetzung eines Projekts oder einer Veränderung als richtig und wichtig an. Trotzdem kommt es, sobald es konkret wird, zu Protest. Woher kommt dieser ablehnende Haltung plötzlich? </p><p>Es ist einerseits eine natürliche Abwehrreaktion des menschlichen Gehirns. Denn unser unglaublich "faules" Gehirn versucht, möglichst viele Vorgänge in unserem Alltag zu automatisieren, um weniger Aufwand zu haben. Auch ein gleichbleibendes Umfeld ist dafür förderlich. Eine Veränderung passt daher natürlich überhaupt nicht ins Konzept, da hierfür bereits automatisierte Prozesse angepasst werden müssen, was Energie und Aufmerksamkeit verlangt. Solange das Gehirn einen Vorteil für uns sieht, indem sich die äußeren Umstände durch die Veränderung verbessern, findet es die Veränderung toll. Sobald es dann jedoch selbst eine Veränderung vornehmen muss, kommt es zur oben beschriebenen Diskrepanz. Soweit der grobe psychologische Ansatz. (in Anlehnung an <a href="https://change-leadership.org/warum-kosten-veraenderungen-eigentlich-so-viel-kraft/" target="_blank" rel="noopener noreferrer">Change Leadership</a>)</p><p>Andererseits hat dieser Protest seinen Ursprung auch in fehlendem Weitblick, der situationsbedingt ist. Denn bei persönlicher Betroffenheit durch eine einzelne Maßnahme rückt das große Gesamtbild schnell in den Hintergrund und die betroffenen Personen fühlen sich ungerecht behandelt. Es fühlt sich für sie danach an, als würden sie deutlich mehr belastet als der Rest der Gesellschaft. Für diese Problematik gibt es mehrere Lösungswege.</p><p>Der vermutlich beste Weg ist es dabei, Vorteile für die Betroffenen zu finden. Bei Windkraft- oder Solarprojekten kann dies beispielsweise durch eine finanzielle Beteiligung der Bürger:innen am Projekt und dessen Erfolg, oder aber auch durch Vereinbarungen mit der Gemeinde realisiert werden. Damit verknüpft ist aber auch der zweite, nahezu in jedem Projekt essenzielle Punkt, die Kommunikation. Je besser die Betroffenen über die Vor- und Nachteile eines Projekts informiert sind, desto leichter fällt es ihnen, den Sinn und die Notwendigkeit des Projekts nachzuvollziehen. Besonders bei finanzieller Beteiligung und anderen persönlichen Vorzügen, die einen direkten, positiven Gegenpol zu persönlichen Einschränkungen darstellen, ist eine umfangreiche Kommunikation hilfreich (weitere Informationen: <a href="https://www.fachagentur-windenergie.de/themen/beteiligungundteilhabe/" target="_blank" rel="noopener noreferrer">Fachagentur Windenergie</a>).</p><p>Diese Punkte gelten aber nicht nur für große Projekte im Bereich der erneuerbaren Energien, sondern können auch auf kleinerer Ebene für Projekte in Unternehmen interessant sein. Klare Kommunikation ist grundsätzlich für <strong>alle </strong>Projekte absolut notwendig. Vielleicht findet man auch hier Möglichkeiten, den Beteiligten (oder auch Betroffenen) die für sie positiven Faktoren des Projekts herauszustellen oder im Konfliktfall solche zu erarbeiten. Denn es gibt kaum Mitarbeiter:innen, die eine Veränderung ablehnen, von der ein persönlicher Vorteil für sie ausgeht. </p><p>Auf dieser Basis möchte ich aber auch an alle Leser:innen appellieren: Wenn ihr euch in einer ablehnenden Haltung gegenüber einem Projekt befindet, ist euer Verhalten und eure Argumentation "NIMBY"? Hinterfragt, ob ihr gerade aus dieser grundsätzlichen und natürlichen Abwehrreaktion heraus handelt und argumentiert, oder ob eure Abwehrhaltung auch mit Blick auf das große Ganze gerechtfertigt und fair ist. Denn unser Gerechtigkeitssinn kann uns bei persönlicher Betroffenheit schnell fehlleiten. </p></div><footer><div class="post__updated">Updated: <time datetime="2024-01-30T00:44">30/01/2024</time></div><ul class="post__tag"><li><a href="https://crichardt.com/tag/basics/" title="Basics" class="invert">Basics</a></li><li><a href="https://crichardt.com/tag/ethical_business/" title="Ethical Business" class="invert">Ethical Business</a></li></ul><div class="post__share"></div><div class="post__bio"><img src="https://crichardt.com/media/website/IMGP3829-crichardt.com-1.jpg" loading="lazy" alt="Clemens Richardt"><div><h3 class="h5"><a href="https://crichardt.com/autor/clemens-richardt/" title="Clemens Richardt" class="invert">Clemens Richardt</a></h3><p>Offensichtlich an den Themen Nachhaltigkeit und Fotografie interessiert. Darüber hinaus für vieles aus der Technikwelt zu begeistern. Wenn die Zeit und Muse vorhanden ist, schreibe ich hier und hoffe dir sowie der Umwelt eine Hilfe zu sein.</p></div></div><nav class="post__nav" id="js-post__nav"><div class="post__nav__prev"><a href="https://crichardt.com/print-it-baby/" rel="prev" class="post__nav__link"><img src="https://crichardt.com/media/posts/35/responsive/IMGP8174-xs.jpg" loading="lazy" height="4912" width="7360" alt="Long Exposure of a Waterfall"><div class="post__nav__text">Prev:<h5 class="invert">PRINT IT BABY</h5></div></a></div><div class="post__nav__next"><a href="https://crichardt.com/klimaschutz-der-geld-bringt/" rel="next" class="post__nav__link"><div class="post__nav__text">Next:<h5 class="invert">Klimaschutz, der Geld bringt</h5></div><img src="https://crichardt.com/media/posts/39/responsive/IMGP8141-xs.jpg" loading="lazy" height="4912" width="7360" alt="Ein Wasserkanal an einem Wanderweg"></a></div></nav></footer><div class="comments"><div class="comments__inner"><h3 class="h4">Comments</h3><div id="disqus_thread"></div><script>var disqus_config = function () {
                                      this.page.url = 'https://crichardt.com/nimby/';
                              		this.page.identifier = '34';
                                  };
                              
                                  var disqus_loaded = false;
                              
                                  function publiiLoadDisqus() {
                                      if(disqus_loaded) {
                                          return false;
                                      }
                              
                                      var top = document.getElementById('disqus_thread').offsetTop;
                              
                                      if (!disqus_loaded && (window.scrollY || window.pageYOffset) + window.innerHeight > top) {
                                          disqus_loaded = true;
                              
                                          (function () {
                                              var d = document, s = d.createElement('script');
                                              s.src = 'https://crichardt-com.disqus.com/embed.js';
                                              s.setAttribute('data-timestamp', +new Date());
                                              (d.head || d.body).appendChild(s);
                                          })();
                                      }
                                  }
                              
                                  publiiLoadDisqus();
                              
                                  window.onscroll = function() {
                                      publiiLoadDisqus();
                                  };</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div></div></div></div></div></article><div class="bottom-news"><div class="wrapper wrapper--full"><ul class="bottom-news__wrapper"></ul></div></div><footer class="footer"><div class="wrapper"><a class="footer__logo" href="https://crichardt.com/"><img src="https://crichardt.com/media/website/CR_light-klein-no-border.png" alt="crichardt.com"></a><div class="footer__copy">© 2019 CLEMENS RICHARDT</div></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://crichardt.com/assets/svg/svg-map.svg#toparrow"/></svg></button></footer><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth:'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'#js-header',};</script><script defer="defer" src="https://crichardt.com/assets/js/scripts.min.js?v=d79800375395a7ef07fbb24142e943e9"></script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">Diese Website nutzt Cookies.</div><div id="pcb-txt" class="pcb__txt">Wählen Sie über die unten stehenden Kontrollkästchen aus, welche Cookies Sie zulassen möchten. Diese Website verwendet Cookies, um den Datenverkehr und die Nutzeraktivitäten auf unserer Website zu untersuchen, für Marketingzwecke und zur Bereitstellung von Social-Media-Funktionen. <a href="https://crichardt.com/datenschutz/">More details...</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--link pcb__btn--configure" aria-haspopup="dialog">Manage preferences</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject non essential</button> <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><div class="pcb__popup" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-popup-title"><div class="pcb__popup__wrapper"><div class="pcb__inner pcb__popup__inner"><div class="pcb__popup__heading"><div id="pcb-popup-title" role="heading" aria-level="2" class="pcb__title">Cookie settings</div><button class="pcb__popup__close" aria-label="Close"></button></div><div class="pcb__popup__content"><div class="pcb__txt pcb__popup__txt">We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies. <a href="https://crichardt.com/datenschutz/">More details...</a></div><ul class="pcb__groups"><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Required</summary></details><div class="pcb__popup__switch is-checked"><input type="checkbox" data-group-name="" id="pcb-group-0" checked="checked"> <label for="pcb-group-0">Required</label></div></li><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Functionality</summary></details><div class="pcb__popup__switch"><input type="checkbox" data-group-name="functions" id="functions-cookies"> <label for="functions-cookies">Functionality</label></div></li><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Analytical</summary></details><div class="pcb__popup__switch"><input type="checkbox" data-group-name="analytics" id="analytics-cookies"> <label for="analytics-cookies">Analytical</label></div></li><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Marketing</summary></details><div class="pcb__popup__switch"><input type="checkbox" data-group-name="marketing" id="marketing-cookies"> <label for="marketing-cookies">Marketing</label></div></li></ul></div><div class="pcb__buttons pcb__popup__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject all</button> <button type="button" class="pcb__btn pcb__btn--save">Save settings</button></div></div></div></div><div class="pcb__overlay" aria-hidden="true"></div><button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>